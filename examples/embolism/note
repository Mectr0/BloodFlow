# How to run the embolism code
the embolism example is tested with the following versions:
- palabos version downloaded in March 10th, 2021. 
- lammps version downloaded in Feb. 2021. 

steps to compile the code: 
1. copy fix_fcm.h/.cpp fix_rls.h/.cpp fix_activate_platelet.h/cpp in rbc folder into your lammps/src directory. Please don't copy other files in rbc folder as they are not compatible with the latest lammps version yet.  
2. set up the correct file path in CMakeLists.txt in examples/embolism. Those places you need to change are commented with lines starting with "Jifu: ..."
3. make sure you have cmake (version 2.8.12.2), make (GNU Make 3.82), openmpi (Open MPI 4.0.3) installed. My tested version for each are listed in the parenthesis. Other versions may work but I haven't tested yet. 
4. compile lammps as a library, go to folder lammps/src, type `make mpi mode=lib` You may need to append `-std=c++11` flags in CCFLAGS in Makefile.mpi under lammps/src/MAKE folder.
5. go to embolism/build, type `cmake ..`
`make`
then go to embolism, you should be able to see the executable embolism generated. You can run it with `mpirun -np 4 embolism in.embolism`. You need to make sure you run it in the embolism folder, as in.embolism requires a path to lammps data file in.platelet. 


